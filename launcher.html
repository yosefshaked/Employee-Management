<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>TutRate - תותרייט</title>
  <style>
    :root {
      --slate-50: #f8fafc;
      --slate-100: #f1f5f9;
      --slate-400: #94a3b8;
      --slate-600: #475569;
      --slate-800: #1e293b;
      --blue-500: #3b82f6;
      --green-500: #22c55e;
      --white: #ffffff;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: transparent;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      direction: rtl;
      user-select: none; /* Prevent text selection */
    }
    .container {
      background-color: var(--white);
      padding: 24px 32px;
      border-radius: 12px;
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
      text-align: center;
      width: 320px;
    }
    .logo {
      width: 64px;
      height: 64px;
      margin: 0 auto 16px auto;
    }
    .header {
      margin-bottom: 24px;
    }
    .header h1 {
      margin: 0 0 4px 0;
      font-size: 24px;
      font-weight: 700;
      color: var(--slate-800);
    }
    .header p {
      margin: 0;
      font-size: 14px;
      color: var(--slate-600);
    }
    .button-group {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    .settings-icon { 
      position: absolute; 
      top: 16px; 
      left: 16px; 
      cursor: pointer; 
      color: var(--slate-400); 
    }
    .settings-icon:hover { 
      color: var(--slate-600); 
    }
    .modal-backdrop { 
      display: none; 
      position: fixed; 
      top: 0; 
      left: 0; 
      width: 100%; 
      height: 100%; 
      background-color: rgba(0,0,0,0.5); 
    }
    .modal-content { 
      position: fixed; 
      top: 50%; 
      left: 50%; 
      transform: translate(-50%, -50%); 
      background: white; 
      padding: 24px; 
      border-radius: 8px; 
      width: 400px; 
    }
    .modal-content input { 
      width: 100%; 
      padding: 8px; 
      margin-top: 4px; 
      border: 1px solid #ccc; 
      border-radius: 4px; 
    }
    .modal-footer { 
      margin-top: 16px; 
      display: flex; 
      justify-content: flex-end; 
      gap: 8px; 
    }
    button {
      font-family: inherit;
      font-size: 16px;
      font-weight: 600;
      padding: 12px 20px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease-in-out;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    button svg {
      width: 18px;
      height: 18px;
    }
    #open-browser {
      color: var(--white);
      background-image: linear-gradient(to right, var(--green-500), var(--blue-500));
      background-size: 200% auto;
    }
    #open-browser:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      background-position: right center;
    }
    #open-app {
    color: var(--slate-800); 
    background-color: var(--white); 
    border: 1px solid #cbd5e1;
    }
    #open-app:hover {
    background-color: var(--slate-50); 
    }
    #quit {
      color: var(--slate-600);
      background-color: var(--slate-100);
      border: 1px solid #e2e8f0;
    }
    #quit:hover {
      background-color: #e2e8f0;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="settings-icon" id="settings-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
    </div>

    <img src="./public/icon.svg" alt="HavatTut Logo" class="logo">
    <div class="header">
      <h1>ניהול עובדים</h1>
      <p>מערכת רישום זמנים</p>
    </div>
    <div class="button-group">
      <button id="open-browser">פתח בדפדפן</button>
      <button id="open-app">פתח אפליקציה</button>
    </div>

    <button id="quit" style="margin-top: 12px; width: 100%;">סגור</button>
  </div>

  <div class="modal-backdrop" id="settings-modal">
    <div class="modal-content">
      <h2>הגדרות API</h2>
      <div style="margin-top: 16px;">
        <label>Supabase URL</label>
        <input id="supabase-url" type="text" placeholder="הדבק כאן את כתובת ה-URL">
      </div>
      <div style="margin-top: 16px;">
        <label>Supabase Anon Key</label>
        <input id="supabase-key" type="password" placeholder="הדבק כאן את המפתח הציבורי">
      </div>
      <div class="modal-footer">
        <button id="cancel-settings">ביטול</button>
        <button id="save-settings">שמור</button>
      </div>
    </div>
  </div>
  <script>
    const { ipcRenderer } = require('electron');
    
const settingsBtn = document.getElementById('settings-btn');
    const modal = document.getElementById('settings-modal');
    const urlInput = document.getElementById('supabase-url');
    const keyInput = document.getElementById('supabase-key');

    settingsBtn.onclick = () => {
      const currentSettings = ipcRenderer.sendSync('get-settings');
      urlInput.value = currentSettings.supabaseUrl || '';
      keyInput.value = currentSettings.supabaseKey || '';
      modal.style.display = 'block';
    };

    document.getElementById('cancel-settings').onclick = () => {
      modal.style.display = 'none';
    };

    document.getElementById('save-settings').onclick = () => {
      ipcRenderer.send('save-settings', {
        supabaseUrl: urlInput.value,
        supabaseKey: keyInput.value,
      });
      modal.style.display = 'none';
    };

    document.getElementById('open-browser').onclick = () => ipcRenderer.send('open-browser');
    document.getElementById('open-app').onclick = () => ipcRenderer.send('open-app');
    document.getElementById('quit').onclick = () => ipcRenderer.send('quit-app');
  </script>
</body>
</html>